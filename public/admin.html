<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #4f46e5;
            --primary-hover: #4338ca;
            --text-color: #333;
            --bg-color: #f9fafb;
            --card-bg: #fff;
            --border-color: #e5e7eb;
            --success-color: #10b981;
            --error-color: #ef4444;
            --warning-color: #f59e0b;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--bg-color);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
        }
        
        .header h1 {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--text-color);
        }
        
        .header-actions {
            display: flex;
            gap: 1rem;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.5rem 1rem;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 0.375rem;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.3s ease;
            text-decoration: none;
            font-size: 0.875rem;
        }
        
        .btn:hover {
            background-color: var(--primary-hover);
        }
        
        .btn i {
            margin-right: 0.5rem;
        }
        
        .btn-secondary {
            background-color: white;
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }
        
        .btn-secondary:hover {
            background-color: var(--bg-color);
        }
        
        .btn-success {
            background-color: var(--success-color);
        }
        
        .btn-success:hover {
            background-color: #0d9488;
        }
        
        .btn-danger {
            background-color: var(--error-color);
        }
        
        .btn-danger:hover {
            background-color: #b91c1c;
        }
        
        .btn-warning {
            background-color: var(--warning-color);
        }
        
        .btn-warning:hover {
            background-color: #d97706;
        }
        
        .tabs {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        
        .tab {
            padding: 0.75rem 1.5rem;
            font-weight: 500;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .tab:hover {
            color: var(--primary-color);
        }
        
        .tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .card {
            background-color: var(--card-bg);
            border-radius: 0.5rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
        }
        
        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            font-size: 0.875rem;
        }
        
        .form-input,
        .form-textarea,
        .form-select {
            width: 100%;
            padding: 0.625rem;
            border: 1px solid var(--border-color);
            border-radius: 0.375rem;
            font-size: 0.875rem;
            transition: border-color 0.3s ease;
        }
        
        .form-input:focus,
        .form-textarea:focus,
        .form-select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }
        
        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .form-select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23666'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.5rem center;
            background-size: 1.5em 1.5em;
            padding-right: 2.5rem;
        }
        
        .form-check {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        
        .form-check-input {
            margin-right: 0.5rem;
        }
        
        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .color-preview {
            display: inline-block;
            width: 2rem;
            height: 2rem;
            border-radius: 0.25rem;
            border: 1px solid var(--border-color);
            vertical-align: middle;
            margin-left: 0.5rem;
        }
        
        .alert {
            padding: 1rem;
            border-radius: 0.375rem;
            margin-bottom: 1.5rem;
            font-size: 0.875rem;
        }
        
        .alert-success {
            background-color: #d1fae5;
            color: #065f46;
            border: 1px solid #34d399;
        }
        
        .alert-error {
            background-color: #fee2e2;
            color: #b91c1c;
            border: 1px solid #f87171;
        }
        
        .table-container {
            overflow-x: auto;
        }
        
        .table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .table th,
        .table td {
            padding: 0.75rem 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
            font-size: 0.875rem;
        }
        
        .table th {
            font-weight: 600;
            background-color: var(--bg-color);
        }
        
        .table tr:hover {
            background-color: rgba(0, 0, 0, 0.02);
        }
        
        .table-actions {
            display: flex;
            gap: 0.5rem;
        }
        
        .icon-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 2rem;
            height: 2rem;
            border-radius: 0.375rem;
            background-color: transparent;
            color: var(--text-color);
            border: 1px solid var(--border-color);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .icon-btn:hover {
            background-color: var(--bg-color);
        }
        
        .icon-btn-edit:hover {
            color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .icon-btn-delete:hover {
            color: var(--error-color);
            border-color: var(--error-color);
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            overflow-y: auto;
            padding: 2rem 0;
        }
        
        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background-color: var(--card-bg);
            border-radius: 0.5rem;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            position: relative;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .modal-header {
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-title {
            font-size: 1.25rem;
            font-weight: 600;
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 1.25rem;
            cursor: pointer;
            color: #666;
            transition: color 0.3s ease;
        }
        
        .modal-close:hover {
            color: var(--error-color);
        }
        
        .modal-body {
            padding: 1.5rem;
        }
        
        .modal-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
        }
        
        .image-preview {
            width: 100%;
            height: 200px;
            border-radius: 0.375rem;
            border: 1px dashed var(--border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
            overflow: hidden;
            position: relative;
        }
        
        .image-preview img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        
        .image-preview-placeholder {
            color: #666;
            font-size: 0.875rem;
        }
        
        .image-preview-actions {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            display: flex;
            gap: 0.5rem;
        }
        
        .image-preview-action {
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 0.875rem;
            color: #666;
            border: none;
            transition: all 0.3s ease;
        }
        
        .image-preview-action:hover {
            background-color: white;
            color: var(--primary-color);
        }
        
        .grid-2 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }
        
        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
        }
        
        .grid-4 {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
        }
        
        .badge {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        .badge-success {
            background-color: #d1fae5;
            color: #065f46;
        }
        
        .badge-warning {
            background-color: #fef3c7;
            color: #92400e;
        }
        
        .badge-danger {
            background-color: #fee2e2;
            color: #b91c1c;
        }
        
        .badge-info {
            background-color: #dbeafe;
            color: #1e40af;
        }
        
        .loading {
            display: inline-block;
            width: 1rem;
            height: 1rem;
            border: 2px solid rgba(79, 70, 229, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s linear infinite;
            margin-right: 0.5rem;
        }
        
        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
        
        .hidden {
            display: none;
        }
        
        .text-center {
            text-align: center;
        }
        
        .text-right {
            text-align: right;
        }
        
        .text-success {
            color: var(--success-color);
        }
        
        .text-danger {
            color: var(--error-color);
        }
        
        .text-warning {
            color: var(--warning-color);
        }
        
        .mt-2 {
            margin-top: 0.5rem;
        }
        
        .mt-4 {
            margin-top: 1rem;
        }
        
        .mb-2 {
            margin-bottom: 0.5rem;
        }
        
        .mb-4 {
            margin-bottom: 1rem;
        }
        
        .w-full {
            width: 100%;
        }
        
        .flex {
            display: flex;
        }
        
        .items-center {
            align-items: center;
        }
        
        .justify-between {
            justify-content: space-between;
        }
        
        .gap-2 {
            gap: 0.5rem;
        }
        
        .gap-4 {
            gap: 1rem;
        }
        
        .flex-wrap {
            flex-wrap: wrap;
        }
        
        .flex-1 {
            flex: 1;
        }
        
        .truncate {
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .confirm-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1100;
            align-items: center;
            justify-content: center;
        }
        
        .confirm-modal.active {
            display: flex;
        }
        
        .confirm-modal-content {
            background-color: var(--card-bg);
            border-radius: 0.5rem;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 400px;
            padding: 1.5rem;
        }
        
        .confirm-modal-icon {
            font-size: 3rem;
            color: var(--warning-color);
            text-align: center;
            margin-bottom: 1rem;
        }
        
        .confirm-modal-title {
            font-size: 1.25rem;
            font-weight: 600;
            text-align: center;
            margin-bottom: 0.5rem;
        }
        
        .confirm-modal-message {
            text-align: center;
            margin-bottom: 1.5rem;
            color: #666;
        }
        
        .confirm-modal-actions {
            display: flex;
            justify-content: center;
            gap: 1rem;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .grid-2,
            .grid-3,
            .grid-4 {
                grid-template-columns: 1fr;
            }
            
            .header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
            
            .header-actions {
                width: 100%;
                justify-content: flex-end;
            }
            
            .tabs {
                overflow-x: auto;
                white-space: nowrap;
                padding-bottom: 0.5rem;
            }
            
            .tab {
                padding: 0.75rem 1rem;
            }
            
            .modal-content {
                margin: 0 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Admin Dashboard</h1>
            <div class="header-actions">
                <a href="/" target="_blank" class="btn btn-secondary">
                    <i class="fas fa-external-link-alt"></i> View Site
                </a>
                <button id="save-all-btn" class="btn btn-success">
                    <i class="fas fa-save"></i> Save All Changes
                </button>
            </div>
        </div>
        
        <div class="tabs">
            <div class="tab active" data-tab="profile">Profile</div>
            <div class="tab" data-tab="services">Services</div>
            <div class="tab" data-tab="products">Products</div>
            <div class="tab" data-tab="gallery">Gallery</div>
            <div class="tab" data-tab="blog">Blog</div>
            <div class="tab" data-tab="faqs">FAQs</div>
            <div class="tab" data-tab="contact">Contact</div>
            <div class="tab" data-tab="settings">Settings</div>
        </div>
        
        <div id="alert-container"></div>
        
        <div class="tab-content active" id="profile-tab">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Profile Information</h2>
                </div>
                <form id="profile-form">
                    <div class="form-group">
                        <label for="profile-name" class="form-label">Name</label>
                        <input type="text" id="profile-name" class="form-input" placeholder="Your Name">
                    </div>
                    <div class="form-group">
                        <label for="profile-description" class="form-label">Description</label>
                        <textarea id="profile-description" class="form-textarea" placeholder="A brief description about yourself"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="profile-image" class="form-label">Profile Image</label>
                        <div class="image-preview" id="profile-image-preview">
                            <div class="image-preview-placeholder">No image selected</div>
                        </div>
                        <input type="file" id="profile-image" class="form-input" accept="image/*">
                    </div>
                    <div class="form-group">
                        <label for="logo-image" class="form-label">Logo Image (Optional)</label>
                        <div class="image-preview" id="logo-image-preview">
                            <div class="image-preview-placeholder">No image selected</div>
                        </div>
                        <input type="file" id="logo-image" class="form-input" accept="image/*">
                    </div>
                </form>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Social Links</h2>
                    <button id="add-link-btn" class="btn btn-secondary">
                        <i class="fas fa-plus"></i> Add Link
                    </button>
                </div>
                <div class="table-container">
                    <table class="table" id="links-table">
                        <thead>
                            <tr>
                                <th>Icon</th>
                                <th>Text</th>
                                <th>URL</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="services-tab">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Services</h2>
                    <button id="add-service-btn" class="btn btn-secondary">
                        <i class="fas fa-plus"></i> Add Service
                    </button>
                </div>
                <div class="table-container">
                    <table class="table" id="services-table">
                        <thead>
                            <tr>
                                <th>Icon</th>
                                <th>Title</th>
                                <th>Description</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="products-tab">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Products</h2>
                    <button id="add-product-btn" class="btn btn-secondary">
                        <i class="fas fa-plus"></i> Add Product
                    </button>
                </div>
                <div class="table-container">
                    <table class="table" id="products-table">
                        <thead>
                            <tr>
                                <th>Image/Icon</th>
                                <th>Title</th>
                                <th>Price</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="gallery-tab">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Gallery Images</h2>
                    <button id="add-gallery-btn" class="btn btn-secondary">
                        <i class="fas fa-plus"></i> Add Image
                    </button>
                </div>
                <div class="grid-3" id="gallery-grid">
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="blog-tab">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Blog Posts</h2>
                    <button id="add-blog-btn" class="btn btn-secondary">
                        <i class="fas fa-plus"></i> Add Blog Post
                    </button>
                </div>
                <div class="table-container">
                    <table class="table" id="blog-table">
                        <thead>
                            <tr>
                                <th>Image</th>
                                <th>Title</th>
                                <th>Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="faqs-tab">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Frequently Asked Questions</h2>
                    <button id="add-faq-btn" class="btn btn-secondary">
                        <i class="fas fa-plus"></i> Add FAQ
                    </button>
                </div>
                <div class="table-container">
                    <table class="table" id="faqs-table">
                        <thead>
                            <tr>
                                <th>Question</th>
                                <th>Answer</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="contact-tab">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Contact Information</h2>
                    <button id="add-contact-btn" class="btn btn-secondary">
                        <i class="fas fa-plus"></i> Add Contact Info
                    </button>
                </div>
                <div class="table-container">
                    <table class="table" id="contact-table">
                        <thead>
                            <tr>
                                <th>Icon</th>
                                <th>Title</th>
                                <th>Value</th>
                                <th>Type</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Contact Form Settings</h2>
                </div>
                <form id="contact-form-settings">
                    <div class="form-group">
                        <div class="form-check">
                            <input type="checkbox" id="show-contact-form" class="form-check-input">
                            <label for="show-contact-form" class="form-label">Show Contact Form</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="contact-email" class="form-label">Email to Receive Messages</label>
                        <input type="email" id="contact-email" class="form-input" placeholder="your@email.com">
                    </div>
                </form>
            </div>
        </div>
        
        <div class="tab-content" id="settings-tab">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Theme Settings</h2>
                </div>
                <form id="theme-form">
                    <div class="grid-2">
                        <div class="form-group">
                            <label for="accent-color" class="form-label">Accent Color</label>
                            <div class="flex items-center">
                                <input type="color" id="accent-color" class="form-input" value="#4f46e5">
                                <span class="color-preview" id="accent-color-preview" style="background-color: #4f46e5;"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="text-color" class="form-label">Text Color</label>
                            <div class="flex items-center">
                                <input type="color" id="text-color" class="form-input" value="#333333">
                                <span class="color-preview" id="text-color-preview" style="background-color: #333333;"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="background-color" class="form-label">Background Color</label>
                            <div class="flex items-center">
                                <input type="color" id="background-color" class="form-input" value="#ffffff">
                                <span class="color-preview" id="background-color-preview" style="background-color: #ffffff;"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="services-bg-color" class="form-label">Services Background</label>
                            <div class="flex items-center">
                                <input type="color" id="services-bg-color" class="form-input" value="#ffffff">
                                <span class="color-preview" id="services-bg-color-preview" style="background-color: #ffffff;"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="products-bg-color" class="form-label">Products Background</label>
                            <div class="flex items-center">
                                <input type="color" id="products-bg-color" class="form-input" value="#f9fafb">
                                <span class="color-preview" id="products-bg-color-preview" style="background-color: #f9fafb;"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="gallery-bg-color" class="form-label">Gallery Background</label>
                            <div class="flex items-center">
                                <input type="color" id="gallery-bg-color" class="form-input" value="#f9fafb">
                                <span class="color-preview" id="gallery-bg-color-preview" style="background-color: #f9fafb;"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="blog-bg-color" class="form-label">Blog Background</label>
                            <div class="flex items-center">
                                <input type="color" id="blog-bg-color" class="form-input" value="#ffffff">
                                <span class="color-preview" id="blog-bg-color-preview" style="background-color: #ffffff;"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="faq-bg-color" class="form-label">FAQ Background</label>
                            <div class="flex items-center">
                                <input type="color" id="faq-bg-color" class="form-input" value="#ffffff">
                                <span class="color-preview" id="faq-bg-color-preview" style="background-color: #ffffff;"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="contact-bg-color" class="form-label">Contact Background</label>
                            <div class="flex items-center">
                                <input type="color" id="contact-bg-color" class="form-input" value="#f9fafb">
                                <span class="color-preview" id="contact-bg-color-preview" style="background-color: #f9fafb;"></span>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Section Titles</h2>
                </div>
                <form id="section-titles-form">
                    <div class="grid-2">
                        <div class="form-group">
                            <label for="services-title" class="form-label">Services Section Title</label>
                            <input type="text" id="services-title" class="form-input" placeholder="My Services">
                        </div>
                        <div class="form-group">
                            <label for="products-title" class="form-label">Products Section Title</label>
                            <input type="text" id="products-title" class="form-input" placeholder="My Products">
                        </div>
                        <div class="form-group">
                            <label for="gallery-title" class="form-label">Gallery Section Title</label>
                            <input type="text" id="gallery-title" class="form-input" placeholder="My Gallery">
                        </div>
                        <div class="form-group">
                            <label for="blog-title" class="form-label">Blog Section Title</label>
                            <input type="text" id="blog-title" class="form-input" placeholder="My Blog">
                        </div>
                        <div class="form-group">
                            <label for="faq-title" class="form-label">FAQ Section Title</label>
                            <input type="text" id="faq-title" class="form-input" placeholder="Frequently Asked Questions">
                        </div>
                        <div class="form-group">
                            <label for="contact-title" class="form-label">Contact Section Title</label>
                            <input type="text" id="contact-title" class="form-input" placeholder="Contact Me">
                        </div>
                        <div class="form-group">
                            <label for="info-title" class="form-label">Contact Info Section Title</label>
                            <input type="text" id="info-title" class="form-input" placeholder="Contact Information">
                        </div>
                    </div>
                </form>
            </div>
        </div>
        
        <div class="modal" id="link-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title" id="link-modal-title">Add Social Link</h3>
                    <button class="modal-close" id="link-modal-close">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="link-form">
                        <input type="hidden" id="link-id">
                        <div class="form-group">
                            <label for="link-icon" class="form-label">Icon</label>
                            <select id="link-icon" class="form-select">
                                <option value="facebook">Facebook</option>
                                <option value="twitter">Twitter</option>
                                <option value="instagram">Instagram</option>
                                <option value="linkedin">LinkedIn</option>
                                <option value="youtube">YouTube</option>
                                <option value="github">GitHub</option>
                                <option value="dribbble">Dribbble</option>
                                <option value="behance">Behance</option>
                                <option value="medium">Medium</option>
                                <option value="pinterest">Pinterest</option>
                                <option value="reddit">Reddit</option>
                                <option value="snapchat">Snapchat</option>
                                <option value="tiktok">TikTok</option>
                                <option value="twitch">Twitch</option>
                                <option value="discord">Discord</option>
                                <option value="telegram">Telegram</option>
                                <option value="whatsapp">WhatsApp</option>
                                <option value="slack">Slack</option>
                                <option value="spotify">Spotify</option>
                                <option value="soundcloud">SoundCloud</option>
                                <option value="apple">Apple</option>
                                <option value="android">Android</option>
                                <option value="amazon">Amazon</option>
                                <option value="google">Google</option>
                                <option value="microsoft">Microsoft</option>
                                <option value="paypal">PayPal</option>
                                <option value="stripe">Stripe</option>
                                <option value="bitcoin">Bitcoin</option>
                                <option value="ethereum">Ethereum</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="link-text" class="form-label">Text</label>
                            <input type="text" id="link-text" class="form-input" placeholder="Follow me on Twitter">
                        </div>
                        <div class="form-group">
                            <label for="link-url" class="form-label">URL</label>
                            <input type="url" id="link-url" class="form-input" placeholder="https://twitter.com/username">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" id="link-modal-cancel">Cancel</button>
                    <button class="btn btn-primary" id="link-modal-save">Save</button>
                </div>
            </div>
        </div>
        
        <div class="modal" id="service-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title" id="service-modal-title">Add Service</h3>
                    <button class="modal-close" id="service-modal-close">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="service-form">
                        <input type="hidden" id="service-id">
                        <div class="form-group">
                            <label for="service-icon" class="form-label">Icon</label>
                            <select id="service-icon" class="form-select">
                                <option value="code">Code</option>
                                <option value="paint-brush">Design</option>
                                <option value="mobile-alt">Mobile</option>
                                <option value="shopping-cart">E-commerce</option>
                                <option value="chart-line">Analytics</option>
                                <option value="bullhorn">Marketing</option>
                                <option value="camera">Photography</option>
                                <option value="video">Video</option>
                                <option value="pencil-alt">Writing</option>
                                <option value="language">Translation</option>
                                <option value="server">Hosting</option>
                                <option value="shield-alt">Security</option>
                                <option value="search">SEO</option>
                                <option value="envelope">Email</option>
                                <option value="comments">Support</option>
                                <option value="users">Consulting</option>
                                <option value="graduation-cap">Education</option>
                                <option value="briefcase">Business</option>
                                <option value="money-bill-wave">Finance</option>
                                <option value="heart">Health</option>
                                <option value="dumbbell">Fitness</option>
                                <option value="utensils">Food</option>
                                <option value="plane">Travel</option>
                                <option value="home">Real Estate</option>
                                <option value="car">Automotive</option>
                                <option value="music">Music</option>
                                <option value="palette">Art</option>
                                <option value="book">Books</option>
                                <option value="gamepad">Gaming</option>
                                <option value="headphones">Audio</option>
                                <option value="tools">Repair</option>
                                <option value="truck">Shipping</option>
                                <option value="calendar-alt">Events</option>
                                <option value="map-marker-alt">Location</option>
                                <option value="clock">Time</option>
                                <option value="cog">Settings</option>
                                <option value="database">Data</option>
                                <option value="cloud">Cloud</option>
                                <option value="robot">AI</option>
                                <option value="vr-cardboard">VR/AR</option>
                                <option value="microchip">IoT</option>
                                <option value="brain">Machine Learning</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="service-title" class="form-label">Title</label>
                            <input type="text" id="service-title" class="form-input" placeholder="Web Development">
                        </div>
                        <div class="form-group">
                            <label for="service-description" class="form-label">Description</label>
                            <textarea id="service-description" class="form-textarea" placeholder="I create responsive websites that work on all devices"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" id="service-modal-cancel">Cancel</button>
                    <button class="btn btn-primary" id="service-modal-save">Save</button>
                </div>
            </div>
        </div>
        
        <div class="modal" id="product-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title" id="product-modal-title">Add Product</h3>
                    <button class="modal-close" id="product-modal-close">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="product-form">
                        <input type="hidden" id="product-id">
                        <div class="form-group">
                            <div class="form-check">
                                <input type="checkbox" id="product-use-icon" class="form-check-input">
                                <label for="product-use-icon" class="form-label">Use Icon Instead of Image</label>
                            </div>
                        </div>
                        <div class="form-group" id="product-image-group">
                            <label for="product-image" class="form-label">Product Image</label>
                            <div class="image-preview" id="product-image-preview">
                                <div class="image-preview-placeholder">No image selected</div>
                            </div>
                            <input type="file" id="product-image" class="form-input" accept="image/*">
                        </div>
                        <div class="form-group hidden" id="product-icon-group">
                            <label for="product-icon" class="form-label">Icon</label>
                            <select id="product-icon" class="form-select">
                                <option value="box">Box</option>
                                <option value="gift">Gift</option>
                                <option value="tag">Tag</option>
                                <option value="shopping-bag">Shopping Bag</option>
                                <option value="store">Store</option>
                                <option value="cart-plus">Cart</option>
                                <option value="credit-card">Credit Card</option>
                                <option value="dollar-sign">Dollar</option>
                                <option value="gem">Gem</option>
                                <option value="trophy">Trophy</option>
                                <option value="certificate">Certificate</option>
                                <option value="award">Award</option>
                                <option value="star">Star</option>
                                <option value="heart">Heart</option>
                                <option value="thumbs-up">Thumbs Up</option>
                                <option value="check-circle">Check Circle</option>
                                <option value="lightbulb">Lightbulb</option>
                                <option value="bolt">Bolt</option>
                                <option value="fire">Fire</option>
                                <option value="rocket">Rocket</option>
                                <option value="book">Book</option>
                                <option value="file">File</option>
                                <option value="image">Image</option>
                                <option value="video">Video</option>
                                <option value="music">Music</option>
                                <option value="headphones">Headphones</option>
                                <option value="camera">Camera</option>
                                <option value="mobile-alt">Mobile</option>
                                <option value="laptop">Laptop</option>
                                <option value="desktop">Desktop</option>
                                <option value="tv">TV</option>
                                <option value="gamepad">Gamepad</option>
                                <option value="puzzle-piece">Puzzle</option>
                                <option value="palette">Palette</option>
                                <option value="paint-brush">Paint Brush</option>
                                <option value="tools">Tools</option>
                                <option value="wrench">Wrench</option>
                                <option value="cog">Cog</option>
                                <option value="code">Code</option>
                                <option value="globe">Globe</option>
                                <option value="map">Map</option>
                                <option value="compass">Compass</option>
                                <option value="plane">Plane</option>
                                <option value="car">Car</option>
                                <option value="bicycle">Bicycle</option>
                                <option value="truck">Truck</option>
                                <option value="ship">Ship</option>
                                <option value="home">Home</option>
                                <option value="building">Building</option>
                                <option value="warehouse">Warehouse</option>
                                <option value="hotel">Hotel</option>
                                <option value="utensils">Utensils</option>
                                <option value="coffee">Coffee</option>
                                <option value="pizza-slice">Pizza</option>
                                <option value="hamburger">Hamburger</option>
                                <option value="ice-cream">Ice Cream</option>
                                <option value="cookie">Cookie</option>
                                <option value="candy-cane">Candy</option>
                                <option value="apple-alt">Apple</option>
                                <option value="carrot">Carrot</option>
                                <option value="lemon">Lemon</option>
                                <option value="pepper-hot">Pepper</option>
                                <option value="wine-bottle">Wine</option>
                                <option value="beer">Beer</option>
                                <option value="glass-martini-alt">Cocktail</option>
                                <option value="mug-hot">Hot Drink</option>
                                <option value="tshirt">T-shirt</option>
                                <option value="socks">Socks</option>
                                <option value="hat-cowboy">Hat</option>
                                <option value="shoe-prints">Shoes</option>
                                <option value="glasses">Glasses</option>
                                <option value="ring">Ring</option>
                                <option value="gem">Jewelry</option>
                                <option value="watch">Watch</option>
                                <option value="briefcase">Briefcase</option>
                                <option value="backpack">Backpack</option>
                                <option value="umbrella">Umbrella</option>
                                <option value="spray-can">Spray Can</option>
                                <option value="soap">Soap</option>
                                <option value="pump-soap">Pump Soap</option>
                                <option value="bath">Bath</option>
                                <option value="toilet-paper">Toilet Paper</option>
                                <option value="tooth">Tooth</option>
                                <option value="pills">Pills</option>
                                <option value="first-aid">First Aid</option>
                                <option value="syringe">Syringe</option>
                                <option value="stethoscope">Stethoscope</option>
                                <option value="heartbeat">Heartbeat</option>
                                <option value="dumbbell">Dumbbell</option>
                                <option value="running">Running</option>
                                <option value="bicycle">Bicycle</option>
                                <option value="swimming-pool">Swimming</option>
                                <option value="table-tennis">Table Tennis</option>
                                <option value="football-ball">Football</option>
                                <option value="basketball-ball">Basketball</option>
                                <option value="baseball-ball">Baseball</option>
                                <option value="volleyball-ball">Volleyball</option>
                                <option value="golf-ball">Golf</option>
                                <option value="hockey-puck">Hockey</option>
                                <option value="bowling-ball">Bowling</option>
                                <option value="quidditch">Quidditch</option>
                                <option value="dog">Dog</option>
                                <option value="cat">Cat</option>
                                <option value="horse">Horse</option>
                                <option value="cow">Cow</option>
                                <option value="frog">Frog</option>
                                <option value="fish">Fish</option>
                                <option value="spider">Spider</option>
                                <option value="kiwi-bird">Bird</option>
                                <option value="dragon">Dragon</option>
                                <option value="otter">Otter</option>
                                <option value="hippo">Hippo</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="product-title" class="form-label">Title</label>
                            <input type="text" id="product-title" class="form-input" placeholder="Product Name">
                        </div>
                        <div class="form-group">
                            <label for="product-description" class="form-label">Description</label>
                            <textarea id="product-description" class="form-textarea" placeholder="Product description"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="product-price" class="form-label">Price</label>
                            <input type="text" id="product-price" class="form-input" placeholder="$99.99">
                        </div>
                        <div class="form-group">
                            <div class="form-check">
                                <input type="checkbox" id="product-has-button" class="form-check-input">
                                <label for="product-has-button" class="form-label">Add Button with Link</label>
                            </div>
                        </div>
                        <div class="form-group hidden" id="product-button-group">
                            <label for="product-button-text" class="form-label">Button Text</label>
                            <input type="text" id="product-button-text" class="form-input" placeholder="Buy Now">
                        </div>
                        <div class="form-group hidden" id="product-button-url-group">
                            <label for="product-button-url" class="form-label">Button URL</label>
                            <input type="url" id="product-button-url" class="form-input" placeholder="https://example.com/product">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" id="product-modal-cancel">Cancel</button>
                    <button class="btn btn-primary" id="product-modal-save">Save</button>
                </div>
            </div>
        </div>
        
        <div class="modal" id="gallery-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Add Gallery Image</h3>
                    <button class="modal-close" id="gallery-modal-close">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="gallery-form">
                        <input type="hidden" id="gallery-id">
                        <div class="form-group">
                            <label for="gallery-image" class="form-label">Image</label>
                            <div class="image-preview" id="gallery-image-preview">
                                <div class="image-preview-placeholder">No image selected</div>
                            </div>
                            <input type="file" id="gallery-image" class="form-input" accept="image/*">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" id="gallery-modal-cancel">Cancel</button>
                    <button class="btn btn-primary" id="gallery-modal-save">Save</button>
                </div>
            </div>
        </div>
        
        <div class="modal" id="blog-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title" id="blog-modal-title">Add Blog Post</h3>
                    <button class="modal-close" id="blog-modal-close">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="blog-form">
                        <input type="hidden" id="blog-id">
                        <div class="form-group">
                            <label for="blog-image" class="form-label">Featured Image</label>
                            <div class="image-preview" id="blog-image-preview">
                                <div class="image-preview-placeholder">No image selected</div>
                            </div>
                            <input type="file" id="blog-image" class="form-input" accept="image/*">
                        </div>
                        <div class="form-group">
                            <label for="blog-title" class="form-label">Title</label>
                            <input type="text" id="blog-title" class="form-input" placeholder="Blog Post Title">
                        </div>
                        <div class="form-group">
                            <label for="blog-date" class="form-label">Date</label>
                            <input type="date" id="blog-date" class="form-input">
                        </div>
                        <div class="form-group">
                            <label for="blog-excerpt" class="form-label">Excerpt</label>
                            <textarea id="blog-excerpt" class="form-textarea" placeholder="A short excerpt of your blog post"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="blog-content" class="form-label">Content</label>
                            <textarea id="blog-content" class="form-textarea" placeholder="Your blog post content" rows="10"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" id="blog-modal-cancel">Cancel</button>
                    <button class="btn btn-primary" id="blog-modal-save">Save</button>
                </div>
            </div>
        </div>
        
        <div class="modal" id="faq-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title" id="faq-modal-title">Add FAQ</h3>
                    <button class="modal-close" id="faq-modal-close">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="faq-form">
                        <input type="hidden" id="faq-id">
                        <div class="form-group">
                            <label for="faq-question" class="form-label">Question</label>
                            <input type="text" id="faq-question" class="form-input" placeholder="What services do you offer?">
                        </div>
                        <div class="form-group">
                            <label for="faq-answer" class="form-label">Answer</label>
                            <textarea id="faq-answer" class="form-textarea" placeholder="I offer web development, design, and consulting services."></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" id="faq-modal-cancel">Cancel</button>
                    <button class="btn btn-primary" id="faq-modal-save">Save</button>
                </div>
            </div>
        </div>
        
        <div class="modal" id="contact-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title" id="contact-modal-title">Add Contact Information</h3>
                    <button class="modal-close" id="contact-modal-close">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="contact-info-form">
                        <input type="hidden" id="contact-info-id">
                        <div class="form-group">
                            <label for="contact-info-icon" class="form-label">Icon</label>
                            <select id="contact-info-icon" class="form-select">
                                <option value="envelope">Email</option>
                                <option value="phone">Phone</option>
                                <option value="map-marker-alt">Address</option>
                                <option value="clock">Hours</option>
                                <option value="globe">Website</option>
                                <option value="calendar-alt">Schedule</option>
                                <option value="id-card">Contact Card</option>
                                <option value="building">Office</option>
                                <option value="fax">Fax</option>
                                <option value="headset">Support</option>
                                <option value="info-circle">Information</option>
                                <option value="user">Person</option>
                                <option value="users">Team</option>
                                <option value="briefcase">Business</option>
                                <option value="store">Store</option>
                                <option value="truck">Shipping</option>
                                <option value="credit-card">Payment</option>
                                <option value="comments">Chat</option>
                                <option value="video">Video Call</option>
                                <option value="mobile-alt">Mobile</option>
                                <option value="tablet-alt">Tablet</option>
                                <option value="laptop">Laptop</option>
                                <option value="desktop">Desktop</option>
                                <option value="wifi">WiFi</option>
                                <option value="network-wired">Network</option>
                                <option value="server">Server</option>
                                <option value="database">Database</option>
                                <option value="cloud">Cloud</option>
                                <option value="code-branch">Repository</option>
                                <option value="code">Code</option>
                                <option value="terminal">Terminal</option>
                                <option value="bug">Bug</option>
                                <option value="shield-alt">Security</option>
                                <option value="lock">Lock</option>
                                <option value="key">Key</option>
                                <option value="fingerprint">Fingerprint</option>
                                <option value="id-badge">Badge</option>
                                <option value="certificate">Certificate</option>
                                <option value="award">Award</option>
                                <option value="trophy">Trophy</option>
                                <option value="medal">Medal</option>
                                <option value="crown">Crown</option>
                                <option value="gem">Gem</option>
                                <option value="gift">Gift</option>
                                <option value="birthday-cake">Birthday</option>
                                <option value="graduation-cap">Graduation</option>
                                <option value="book">Book</option>
                                <option value="bookmark">Bookmark</option>
                                <option value="file">File</option>
                                <option value="folder">Folder</option>
                                <option value="archive">Archive</option>
                                <option value="save">Save</option>
                                <option value="print">Print</option>
                                <option value="camera">Camera</option>
                                <option value="image">Image</option>
                                <option value="film">Film</option>
                                <option value="music">Music</option>
                                <option value="podcast">Podcast</option>
                                <option value="headphones">Headphones</option>
                                <option value="microphone">Microphone</option>
                                <option value="volume-up">Speaker</option>
                                <option value="play">Play</option>
                                <option value="stop">Stop</option>
                                <option value="pause">Pause</option>
                                <option value="forward">Forward</option>
                                <option value="backward">Backward</option>
                                <option value="step-forward">Step Forward</option>
                                <option value="step-backward">Step Backward</option>
                                <option value="fast-forward">Fast Forward</option>
                                <option value="fast-backward">Fast Backward</option>
                                <option value="eject">Eject</option>
                                <option value="expand">Expand</option>
                                <option value="compress">Compress</option>
                                <option value="plus">Plus</option>
                                <option value="minus">Minus</option>
                                <option value="times">Times</option>
                                <option value="check">Check</option>
                                <option value="question">Question</option>
                                <option value="exclamation">Exclamation</option>
                                <option value="asterisk">Asterisk</option>
                                <option value="hashtag">Hashtag</option>
                                <option value="at">At</option>
                                <option value="percent">Percent</option>
                                <option value="dollar-sign">Dollar</option>
                                <option value="euro-sign">Euro</option>
                                <option value="pound-sign">Pound</option>
                                <option value="rupee-sign">Rupee</option>
                                <option value="yen-sign">Yen</option>
                                <option value="ruble-sign">Ruble</option>
                                <option value="lira-sign">Lira</option>
                                <option value="won-sign">Won</option>
                                <option value="hryvnia">Hryvnia</option>
                                <option value="shekel-sign">Shekel</option>
                                <option value="tenge">Tenge</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="contact-info-title" class="form-label">Title</label>
                            <input type="text" id="contact-info-title" class="form-input" placeholder="Email">
                        </div>
                        <div class="form-group">
                            <label for="contact-info-value" class="form-label">Value</label>
                            <input type="text" id="contact-info-value" class="form-input" placeholder="your@email.com">
                        </div>
                        <div class="form-group">
                            <label for="contact-info-type" class="form-label">Type</label>
                            <select id="contact-info-type" class="form-select">
                                <option value="text">Text</option>
                                <option value="email">Email</option>
                                <option value="phone">Phone</option>
                                <option value="link">Link</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" id="contact-modal-cancel">Cancel</button>
                    <button class="btn btn-primary" id="contact-modal-save">Save</button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="confirm-modal" id="confirm-modal">
        <div class="confirm-modal-content">
            <div class="confirm-modal-icon">
                <i class="fas fa-exclamation-triangle"></i>
            </div>
            <h3 class="confirm-modal-title">Confirm Deletion</h3>
            <p class="confirm-modal-message" id="confirm-modal-message">Are you sure you want to delete this item? This action cannot be undone.</p>
            <div class="confirm-modal-actions">
                <button class="btn btn-secondary" id="confirm-cancel">Cancel</button>
                <button class="btn btn-danger" id="confirm-delete">Delete</button>
            </div>
        </div>
    </div>
</div>

<script>
let currentEditId = null;
let currentDeleteCallback = null;
let profileData = {
    name: '',
    description: '',
    profileImage: null,
    logoImage: null,
    links: [],
    services: [],
    products: [],
    galleryImages: [],
    blogPosts: [],
    faqs: [],
    contactInfo: [],
    showContactForm: true,
    contactEmail: '',
    accentColor: '#4f46e5',
    textColor: '#333333',
    backgroundColor: '#ffffff',
    servicesBgColor: '#ffffff',
    productsBgColor: '#f9fafb',
    galleryBgColor: '#f9fafb',
    blogBgColor: '#ffffff',
    faqBgColor: '#ffffff',
    contactBgColor: '#f9fafb',
    servicesSectionTitle: 'My Services',
    productsSectionTitle: 'My Products',
    gallerySectionTitle: 'My Gallery',
    blogSectionTitle: 'Latest Blog Posts',
    faqSectionTitle: 'Frequently Asked Questions',
    contactSectionTitle: 'Contact Me',
    infoSectionTitle: 'Contact Information'
};

const tabs = document.querySelectorAll('.tab');
const tabContents = document.querySelectorAll('.tab-content');

tabs.forEach(tab => {
    tab.addEventListener('click', () => {
        const tabName = tab.getAttribute('data-tab');
        
        tabs.forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        
        tabContents.forEach(content => content.classList.remove('active'));
        document.getElementById(`${tabName}-tab`).classList.add('active');
    });
});

function showAlert(message, type = 'success') {
    const alertContainer = document.getElementById('alert-container');
    const alert = document.createElement('div');
    alert.className = `alert alert-${type}`;
    alert.textContent = message;
    
    alertContainer.appendChild(alert);
    
    setTimeout(() => {
        alert.remove();
    }, 3000);
}

function showConfirmModal(message, callback) {
    const modal = document.getElementById('confirm-modal');
    const messageEl = document.getElementById('confirm-modal-message');
    
    messageEl.textContent = message;
    currentDeleteCallback = callback;
    modal.classList.add('active');
}

function closeConfirmModal() {
    const modal = document.getElementById('confirm-modal');
    modal.classList.remove('active');
    currentDeleteCallback = null;
}

document.getElementById('confirm-cancel').addEventListener('click', closeConfirmModal);
document.getElementById('confirm-delete').addEventListener('click', () => {
    if (currentDeleteCallback) {
        currentDeleteCallback();
    }
    closeConfirmModal();
});

function handleImageUpload(inputId, previewId, callback) {
    const input = document.getElementById(inputId);
    const preview = document.getElementById(previewId);
    
    input.addEventListener('change', (e) => {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = (e) => {
                preview.innerHTML = `
                    <img src="${e.target.result}" alt="Preview">
                    <div class="image-preview-actions">
                        <button class="image-preview-action" onclick="removeImage('${inputId}', '${previewId}')">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                `;
                if (callback) callback(e.target.result);
            };
            reader.readAsDataURL(file);
        }
    });
}

function removeImage(inputId, previewId) {
    document.getElementById(inputId).value = '';
    document.getElementById(previewId).innerHTML = '<div class="image-preview-placeholder">No image selected</div>';
}

handleImageUpload('profile-image', 'profile-image-preview', (src) => {
    profileData.profileImage = src;
});

handleImageUpload('logo-image', 'logo-image-preview', (src) => {
    profileData.logoImage = src;
});

document.getElementById('add-link-btn').addEventListener('click', () => {
    currentEditId = null;
    document.getElementById('link-modal-title').textContent = 'Add Social Link';
    document.getElementById('link-form').reset();
    document.getElementById('link-modal').classList.add('active');
});

document.getElementById('link-modal-close').addEventListener('click', () => {
    document.getElementById('link-modal').classList.remove('active');
});

document.getElementById('link-modal-cancel').addEventListener('click', () => {
    document.getElementById('link-modal').classList.remove('active');
});

document.getElementById('link-modal-save').addEventListener('click', () => {
    const link = {
        id: currentEditId || Date.now(),
        icon: document.getElementById('link-icon').value,
        text: document.getElementById('link-text').value,
        url: document.getElementById('link-url').value
    };
    
    if (currentEditId) {
        const index = profileData.links.findIndex(l => l.id === currentEditId);
        profileData.links[index] = link;
    } else {
        profileData.links.push(link);
    }
    
    loadLinks();
    document.getElementById('link-modal').classList.remove('active');
    showAlert('Link saved successfully');
});

function loadLinks() {
    const tbody = document.querySelector('#links-table tbody');
    tbody.innerHTML = '';
    
    profileData.links.forEach(link => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
            <td><i class="fab fa-${link.icon}"></i></td>
            <td>${link.text}</td>
            <td><a href="${link.url}" target="_blank">${link.url}</a></td>
            <td class="table-actions">
                <button class="icon-btn icon-btn-edit" onclick="editLink(${link.id})">
                    <i class="fas fa-edit"></i>
                </button>
                <button class="icon-btn icon-btn-delete" onclick="deleteLink(${link.id})">
                    <i class="fas fa-trash"></i>
                </button>
            </td>
        `;
        tbody.appendChild(tr);
    });
}

function editLink(id) {
    currentEditId = id;
    const link = profileData.links.find(l => l.id === id);
    
    document.getElementById('link-modal-title').textContent = 'Edit Social Link';
    document.getElementById('link-icon').value = link.icon;
    document.getElementById('link-text').value = link.text;
    document.getElementById('link-url').value = link.url;
    document.getElementById('link-modal').classList.add('active');
}

function deleteLink(id) {
    showConfirmModal('Are you sure you want to delete this social link?', () => {
        profileData.links = profileData.links.filter(l => l.id !== id);
        loadLinks();
        showAlert('Link deleted successfully');
    });
}

document.getElementById('add-service-btn').addEventListener('click', () => {
    currentEditId = null;
    document.getElementById('service-modal-title').textContent = 'Add Service';
    document.getElementById('service-form').reset();
    document.getElementById('service-modal').classList.add('active');
});

document.getElementById('service-modal-close').addEventListener('click', () => {
    document.getElementById('service-modal').classList.remove('active');
});

document.getElementById('service-modal-cancel').addEventListener('click', () => {
    document.getElementById('service-modal').classList.remove('active');
});

document.getElementById('service-modal-save').addEventListener('click', () => {
    const service = {
        id: currentEditId || Date.now(),
        icon: document.getElementById('service-icon').value,
        title: document.getElementById('service-title').value,
        description: document.getElementById('service-description').value
    };
    
    if (currentEditId) {
        const index = profileData.services.findIndex(s => s.id === currentEditId);
        profileData.services[index] = service;
    } else {
        profileData.services.push(service);
    }
    
    loadServices();
    document.getElementById('service-modal').classList.remove('active');
    showAlert('Service saved successfully');
});

function loadServices() {
    const tbody = document.querySelector('#services-table tbody');
    tbody.innerHTML = '';
    
    profileData.services.forEach(service => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
            <td><i class="fas fa-${service.icon}"></i></td>
            <td>${service.title}</td>
            <td>${service.description}</td>
            <td class="table-actions">
                <button class="icon-btn icon-btn-edit" onclick="editService(${service.id})">
                    <i class="fas fa-edit"></i>
                </button>
                <button class="icon-btn icon-btn-delete" onclick="deleteService(${service.id})">
                    <i class="fas fa-trash"></i>
                </button>
            </td>
        `;
        tbody.appendChild(tr);
    });
}

function editService(id) {
    currentEditId = id;
    const service = profileData.services.find(s => s.id === id);
    
    document.getElementById('service-modal-title').textContent = 'Edit Service';
    document.getElementById('service-icon').value = service.icon;
    document.getElementById('service-title').value = service.title;
    document.getElementById('service-description').value = service.description;
    document.getElementById('service-modal').classList.add('active');
}

function deleteService(id) {
    showConfirmModal('Are you sure you want to delete this service?', () => {
        profileData.services = profileData.services.filter(s => s.id !== id);
        loadServices();
        showAlert('Service deleted successfully');
    });
}

let currentProductImage = null;

document.getElementById('add-product-btn').addEventListener('click', () => {
    currentEditId = null;
    currentProductImage = null;
    document.getElementById('product-modal-title').textContent = 'Add Product';
    document.getElementById('product-form').reset();
    document.getElementById('product-image-preview').innerHTML = '<div class="image-preview-placeholder">No image selected</div>';
    document.getElementById('product-use-icon').checked = false;
    document.getElementById('product-has-button').checked = false;
    toggleProductImageIcon();
    toggleProductButton();
    document.getElementById('product-modal').classList.add('active');
});

document.getElementById('product-modal-close').addEventListener('click', () => {
    document.getElementById('product-modal').classList.remove('active');
});

document.getElementById('product-modal-cancel').addEventListener('click', () => {
    document.getElementById('product-modal').classList.remove('active');
});

document.getElementById('product-use-icon').addEventListener('change', toggleProductImageIcon);

function toggleProductImageIcon() {
    const useIcon = document.getElementById('product-use-icon').checked;
    const imageGroup = document.getElementById('product-image-group');
    const iconGroup = document.getElementById('product-icon-group');
    
    if (useIcon) {
        imageGroup.classList.add('hidden');
        iconGroup.classList.remove('hidden');
    } else {
        imageGroup.classList.remove('hidden');
        iconGroup.classList.add('hidden');
    }
}

document.getElementById('product-has-button').addEventListener('change', toggleProductButton);

function toggleProductButton() {
    const hasButton = document.getElementById('product-has-button').checked;
    const buttonGroup = document.getElementById('product-button-group');
    const buttonUrlGroup = document.getElementById('product-button-url-group');
    
    if (hasButton) {
        buttonGroup.classList.remove('hidden');
        buttonUrlGroup.classList.remove('hidden');
    } else {
        buttonGroup.classList.add('hidden');
        buttonUrlGroup.classList.add('hidden');
    }
}

handleImageUpload('product-image', 'product-image-preview', (src) => {
    currentProductImage = src;
});

document.getElementById('product-modal-save').addEventListener('click', () => {
    const useIcon = document.getElementById('product-use-icon').checked;
    const hasButton = document.getElementById('product-has-button').checked;
    
    const product = {
        id: currentEditId || Date.now(),
        title: document.getElementById('product-title').value,
        description: document.getElementById('product-description').value,
        price: document.getElementById('product-price').value
    };
    
    if (useIcon) {
        product.icon = document.getElementById('product-icon').value;
    } else if (currentProductImage) {
        product.image = currentProductImage;
    }
    
    if (hasButton) {
        product.url = document.getElementById('product-button-url').value;
        product.buttonText = document.getElementById('product-button-text').value;
    }
    
    if (currentEditId) {
        const index = profileData.products.findIndex(p => p.id === currentEditId);
        profileData.products[index] = product;
    } else {
        profileData.products.push(product);
    }
    
    loadProducts();
    document.getElementById('product-modal').classList.remove('active');
    showAlert('Product saved successfully');
});

function loadProducts() {
    const tbody = document.querySelector('#products-table tbody');
    tbody.innerHTML = '';
    
    profileData.products.forEach(product => {
        const tr = document.createElement('tr');
        let visual = '';
        
        if (product.image) {
            visual = `<img src="${product.image}" alt="${product.title}" style="width: 50px; height: 50px; object-fit: cover; border-radius: 4px;">`;
        } else if (product.icon) {
            visual = `<i class="fas fa-${product.icon}" style="font-size: 1.5rem;"></i>`;
        } else {
            visual = '<span class="text-muted">No image/icon</span>';
        }
        
        tr.innerHTML = `
            <td>${visual}</td>
            <td>${product.title}</td>
            <td>${product.price}</td>
            <td class="table-actions">
                <button class="icon-btn icon-btn-edit" onclick="editProduct(${product.id})">
                    <i class="fas fa-edit"></i>
                </button>
                <button class="icon-btn icon-btn-delete" onclick="deleteProduct(${product.id})">
                    <i class="fas fa-trash"></i>
                </button>
            </td>
        `;
        tbody.appendChild(tr);
    });
}

function editProduct(id) {
    currentEditId = id;
    const product = profileData.products.find(p => p.id === id);
    
    document.getElementById('product-modal-title').textContent = 'Edit Product';
    document.getElementById('product-title').value = product.title;
    document.getElementById('product-description').value = product.description;
    document.getElementById('product-price').value = product.price;
    
    if (product.icon) {
        document.getElementById('product-use-icon').checked = true;
        document.getElementById('product-icon').value = product.icon;
        currentProductImage = null;
    } else if (product.image) {
        document.getElementById('product-use-icon').checked = false;
        currentProductImage = product.image;
        document.getElementById('product-image-preview').innerHTML = `
            <img src="${product.image}" alt="Preview">
            <div class="image-preview-actions">
                <button class="image-preview-action" onclick="removeImage('product-image', 'product-image-preview')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        `;
    }
    
    if (product.url) {
        document.getElementById('product-has-button').checked = true;
        document.getElementById('product-button-url').value = product.url;
        document.getElementById('product-button-text').value = product.buttonText || 'Learn More';
    } else {
        document.getElementById('product-has-button').checked = false;
    }
    
    toggleProductImageIcon();
    toggleProductButton();
    document.getElementById('product-modal').classList.add('active');
}

function deleteProduct(id) {
    showConfirmModal('Are you sure you want to delete this product?', () => {
        profileData.products = profileData.products.filter(p => p.id !== id);
        loadProducts();
        showAlert('Product deleted successfully');
    });
}

let currentGalleryImage = null;

document.getElementById('add-gallery-btn').addEventListener('click', () => {
    currentEditId = null;
    currentGalleryImage = null;
    document.getElementById('gallery-form').reset();
    document.getElementById('gallery-image-preview').innerHTML = '<div class="image-preview-placeholder">No image selected</div>';
    document.getElementById('gallery-modal').classList.add('active');
});

document.getElementById('gallery-modal-close').addEventListener('click', () => {
    document.getElementById('gallery-modal').classList.remove('active');
});

document.getElementById('gallery-modal-cancel').addEventListener('click', () => {
    document.getElementById('gallery-modal').classList.remove('active');
});

handleImageUpload('gallery-image', 'gallery-image-preview', (src) => {
    currentGalleryImage = src;
});

document.getElementById('gallery-modal-save').addEventListener('click', () => {
    if (currentGalleryImage) {
        profileData.galleryImages.push(currentGalleryImage);
        loadGallery();
        document.getElementById('gallery-modal').classList.remove('active');
        showAlert('Gallery image added successfully');
    } else {
        showAlert('Please select an image', 'error');
    }
});

function loadGallery() {
    const galleryGrid = document.getElementById('gallery-grid');
    galleryGrid.innerHTML = '';
    
    profileData.galleryImages.forEach((image, index) => {
        const item = document.createElement('div');
        item.className = 'gallery-item';
        item.innerHTML = `
            <img src="${image}" alt="Gallery ${index + 1}">
            <div class="gallery-item-actions">
                <button class="icon-btn icon-btn-delete" onclick="deleteGalleryImage(${index})">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
        `;
        galleryGrid.appendChild(item);
    });
}

function deleteGalleryImage(index) {
    showConfirmModal('Are you sure you want to delete this gallery image?', () => {
        profileData.galleryImages.splice(index, 1);
        loadGallery();
        showAlert('Gallery image deleted successfully');
    });
}

let currentBlogImage = null;

document.getElementById('add-blog-btn').addEventListener('click', () => {
    currentEditId = null;
    currentBlogImage = null;
    document.getElementById('blog-modal-title').textContent = 'Add Blog Post';
    document.getElementById('blog-form').reset();
    document.getElementById('blog-image-preview').innerHTML = '<div class="image-preview-placeholder">No image selected</div>';
    document.getElementById('blog-date').value = new Date().toISOString().split('T')[0];
    document.getElementById('blog-modal').classList.add('active');
});

document.getElementById('blog-modal-close').addEventListener('click', () => {
    document.getElementById('blog-modal').classList.remove('active');
});

document.getElementById('blog-modal-cancel').addEventListener('click', () => {
    document.getElementById('blog-modal').classList.remove('active');
});

handleImageUpload('blog-image', 'blog-image-preview', (src) => {
    currentBlogImage = src;
});

document.getElementById('blog-modal-save').addEventListener('click', () => {
    const blogPost = {
        id: currentEditId || Date.now(),
        title: document.getElementById('blog-title').value,
        date: document.getElementById('blog-date').value,
        excerpt: document.getElementById('blog-excerpt').value,
        content: document.getElementById('blog-content').value,
        image: currentBlogImage
    };
    
    if (currentEditId) {
        const index = profileData.blogPosts.findIndex(p => p.id === currentEditId);
        profileData.blogPosts[index] = blogPost;
    } else {
        profileData.blogPosts.push(blogPost);
    }
    
    loadBlogPosts();
    document.getElementById('blog-modal').classList.remove('active');
    showAlert('Blog post saved successfully');
});

function loadBlogPosts() {
    const tbody = document.querySelector('#blog-table tbody');
    tbody.innerHTML = '';
    
    profileData.blogPosts.forEach(post => {
        const tr = document.createElement('tr');
        const imageHtml = post.image 
            ? `<img src="${post.image}" alt="${post.title}" style="width: 50px; height: 50px; object-fit: cover; border-radius: 4px;">` 
            : '<span class="text-muted">No image</span>';
        
        tr.innerHTML = `
            <td>${imageHtml}</td>
            <td>${post.title}</td>
            <td>${post.date}</td>
            <td class="table-actions">
                <button class="icon-btn icon-btn-edit" onclick="editBlogPost(${post.id})">
                    <i class="fas fa-edit"></i>
                </button>
                <button class="icon-btn icon-btn-delete" onclick="deleteBlogPost(${post.id})">
                    <i class="fas fa-trash"></i>
                </button>
            </td>
        `;
        tbody.appendChild(tr);
    });
}

function editBlogPost(id) {
    currentEditId = id;
    const post = profileData.blogPosts.find(p => p.id === id);
    
    document.getElementById('blog-modal-title').textContent = 'Edit Blog Post';
    document.getElementById('blog-title').value = post.title;
    document.getElementById('blog-date').value = post.date;
    document.getElementById('blog-excerpt').value = post.excerpt;
    document.getElementById('blog-content').value = post.content;
    
    if (post.image) {
        currentBlogImage = post.image;
        document.getElementById('blog-image-preview').innerHTML = `
            <img src="${post.image}" alt="Preview">
            <div class="image-preview-actions">
                <button class="image-preview-action" onclick="removeImage('blog-image', 'blog-image-preview')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        `;
    } else {
        currentBlogImage = null;
    }
    
    document.getElementById('blog-modal').classList.add('active');
}

function deleteBlogPost(id) {
    showConfirmModal('Are you sure you want to delete this blog post?', () => {
        profileData.blogPosts = profileData.blogPosts.filter(p => p.id !== id);
        loadBlogPosts();
        showAlert('Blog post deleted successfully');
    });
}

document.getElementById('add-faq-btn').addEventListener('click', () => {
    currentEditId = null;
    document.getElementById('faq-modal-title').textContent = 'Add FAQ';
    document.getElementById('faq-form').reset();
    document.getElementById('faq-modal').classList.add('active');
});

document.getElementById('faq-modal-close').addEventListener('click', () => {
    document.getElementById('faq-modal').classList.remove('active');
});

document.getElementById('faq-modal-cancel').addEventListener('click', () => {
    document.getElementById('faq-modal').classList.remove('active');
});

document.getElementById('faq-modal-save').addEventListener('click', () => {
    const faq = {
        id: currentEditId || Date.now(),
        question: document.getElementById('faq-question').value,
        answer: document.getElementById('faq-answer').value
    };
    
    if (currentEditId) {
        const index = profileData.faqs.findIndex(f => f.id === currentEditId);
        profileData.faqs[index] = faq;
    } else {
        profileData.faqs.push(faq);
    }
    
    loadFaqs();
    document.getElementById('faq-modal').classList.remove('active');
    showAlert('FAQ saved successfully');
});

function loadFaqs() {
    const tbody = document.querySelector('#faqs-table tbody');
    tbody.innerHTML = '';
    
    profileData.faqs.forEach(faq => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
            <td>${faq.question}</td>
            <td>${faq.answer}</td>
            <td class="table-actions">
                <button class="icon-btn icon-btn-edit" onclick="editFaq(${faq.id})">
                    <i class="fas fa-edit"></i>
                </button>
                <button class="icon-btn icon-btn-delete" onclick="deleteFaq(${faq.id})">
                    <i class="fas fa-trash"></i>
                </button>
            </td>
        `;
        tbody.appendChild(tr);
    });
}

function editFaq(id) {
    currentEditId = id;
    const faq = profileData.faqs.find(f => f.id === id);
    
    document.getElementById('faq-modal-title').textContent = 'Edit FAQ';
    document.getElementById('faq-question').value = faq.question;
    document.getElementById('faq-answer').value = faq.answer;
    document.getElementById('faq-modal').classList.add('active');
}

function deleteFaq(id) {
    showConfirmModal('Are you sure you want to delete this FAQ?', () => {
        profileData.faqs = profileData.faqs.filter(f => f.id !== id);
        loadFaqs();
        showAlert('FAQ deleted successfully');
    });
}

document.getElementById('add-contact-btn').addEventListener('click', () => {
    currentEditId = null;
    document.getElementById('contact-modal-title').textContent = 'Add Contact Information';
    document.getElementById('contact-info-form').reset();
    document.getElementById('contact-modal').classList.add('active');
});

document.getElementById('contact-modal-close').addEventListener('click', () => {
    document.getElementById('contact-modal').classList.remove('active');
});

document.getElementById('contact-modal-cancel').addEventListener('click', () => {
    document.getElementById('contact-modal').classList.remove('active');
});

document.getElementById('contact-modal-save').addEventListener('click', () => {
    const contactInfo = {
        id: currentEditId || Date.now(),
        icon: document.getElementById('contact-info-icon').value,
        title: document.getElementById('contact-info-title').value,
        value: document.getElementById('contact-info-value').value,
        type: document.getElementById('contact-info-type').value
    };
    
    if (currentEditId) {
        const index = profileData.contactInfo.findIndex(c => c.id === currentEditId);
        profileData.contactInfo[index] = contactInfo;
    } else {
        profileData.contactInfo.push(contactInfo);
    }
    
    loadContactInfo();
    document.getElementById('contact-modal').classList.remove('active');
    showAlert('Contact information saved successfully');
});

function loadContactInfo() {
    const tbody = document.querySelector('#contact-table tbody');
    tbody.innerHTML = '';
    
    profileData.contactInfo.forEach(info => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
            <td><i class="fas fa-${info.icon}"></i></td>
            <td>${info.title}</td>
            <td>${info.value}</td>
            <td><span class="badge badge-info">${info.type}</span></td>
            <td class="table-actions">
                <button class="icon-btn icon-btn-edit" onclick="editContactInfo(${info.id})">
                    <i class="fas fa-edit"></i>
                </button>
                <button class="icon-btn icon-btn-delete" onclick="deleteContactInfo(${info.id})">
                    <i class="fas fa-trash"></i>
                </button>
            </td>
        `;
        tbody.appendChild(tr);
    });
}

function editContactInfo(id) {
    currentEditId = id;
    const info = profileData.contactInfo.find(c => c.id === id);
    
    document.getElementById('contact-modal-title').textContent = 'Edit Contact Information';
    document.getElementById('contact-info-icon').value = info.icon;
    document.getElementById('contact-info-title').value = info.title;
    document.getElementById('contact-info-value').value = info.value;
    document.getElementById('contact-info-type').value = info.type;
    document.getElementById('contact-modal').classList.add('active');
}

function deleteContactInfo(id) {
    showConfirmModal('Are you sure you want to delete this contact information?', () => {
        profileData.contactInfo = profileData.contactInfo.filter(c => c.id !== id);
        loadContactInfo();
        showAlert('Contact information deleted successfully');
    });
}

document.querySelectorAll('input[type="color"]').forEach(input => {
    const previewId = input.id + '-preview';
    const preview = document.getElementById(previewId);
    
    input.addEventListener('input', (e) => {
        preview.style.backgroundColor = e.target.value;
    });
});

document.getElementById('save-all-btn').addEventListener('click', async () => {
    profileData.name = document.getElementById('profile-name').value;
    profileData.description = document.getElementById('profile-description').value;
    
    profileData.showContactForm = document.getElementById('show-contact-form').checked;
    profileData.contactEmail = document.getElementById('contact-email').value;
    
    profileData.accentColor = document.getElementById('accent-color').value;
    profileData.textColor = document.getElementById('text-color').value;
    profileData.backgroundColor = document.getElementById('background-color').value;
    profileData.servicesBgColor = document.getElementById('services-bg-color').value;
    profileData.productsBgColor = document.getElementById('products-bg-color').value;
    profileData.galleryBgColor = document.getElementById('gallery-bg-color').value;
    profileData.blogBgColor = document.getElementById('blog-bg-color').value;
    profileData.faqBgColor = document.getElementById('faq-bg-color').value;
    profileData.contactBgColor = document.getElementById('contact-bg-color').value;
    
    profileData.servicesSectionTitle = document.getElementById('services-title').value;
    profileData.productsSectionTitle = document.getElementById('products-title').value;
    profileData.gallerySectionTitle = document.getElementById('gallery-title').value;
    profileData.blogSectionTitle = document.getElementById('blog-title').value;
    profileData.faqSectionTitle = document.getElementById('faq-title').value;
    profileData.contactSectionTitle = document.getElementById('contact-title').value;
    profileData.infoSectionTitle = document.getElementById('info-title').value;
    
    try {
        const response = await fetch('/api/save-profile', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${localStorage.getItem('authToken')}`
            },
            body: JSON.stringify(profileData)
        });
        
        if (response.ok) {
            showAlert('All changes saved successfully!');
        } else {
            showAlert('Error saving changes. Please try again.', 'error');
        }
    } catch (error) {
        console.error('Error saving profile:', error);
        showAlert('Error saving changes. Please try again.', 'error');
    }
});

async function loadProfileData() {
    try {
        const token = checkAuthStatus();

        const response = await fetch('/api/profile');
        if (response.ok) {
            const data = await response.json();
            profileData = data;
            
            document.getElementById('profile-name').value = data.name || '';
            document.getElementById('profile-description').value = data.description || '';
            
            if (data.profileImage) {
                document.getElementById('profile-image-preview').innerHTML = `
                    <img src="${data.profileImage}" alt="Preview">
                    <div class="image-preview-actions">
                        <button class="image-preview-action" onclick="removeImage('profile-image', 'profile-image-preview')">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                `;
            }
            
            if (data.logoImage) {
                document.getElementById('logo-image-preview').innerHTML = `
                    <img src="${data.logoImage}" alt="Preview">
                    <div class="image-preview-actions">
                        <button class="image-preview-action" onclick="removeImage('logo-image', 'logo-image-preview')">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                `;
            }
            
            document.getElementById('show-contact-form').checked = data.showContactForm !== false;
            document.getElementById('contact-email').value = data.contactEmail || '';
            
            document.getElementById('accent-color').value = data.accentColor || '#4f46e5';
            document.getElementById('text-color').value = data.textColor || '#333333';
            document.getElementById('background-color').value = data.backgroundColor || '#ffffff';
            document.getElementById('services-bg-color').value = data.servicesBgColor || '#ffffff';
            document.getElementById('products-bg-color').value = data.productsBgColor || '#f9fafb';
            document.getElementById('gallery-bg-color').value = data.galleryBgColor || '#f9fafb';
            document.getElementById('blog-bg-color').value = data.blogBgColor || '#ffffff';
            document.getElementById('faq-bg-color').value = data.faqBgColor || '#ffffff';
            document.getElementById('contact-bg-color').value = data.contactBgColor || '#f9fafb';
            
            document.querySelectorAll('input[type="color"]').forEach(input => {
                const previewId = input.id + '-preview';
                const preview = document.getElementById(previewId);
                if (preview) {
                    preview.style.backgroundColor = input.value;
                }
            });
            
            document.getElementById('services-title').value = data.servicesSectionTitle || 'My Services';
            document.getElementById('products-title').value = data.productsSectionTitle || 'My Products';
            document.getElementById('gallery-title').value = data.gallerySectionTitle || 'My Gallery';
            document.getElementById('blog-title').value = data.blogSectionTitle || 'Latest Blog Posts';
            document.getElementById('faq-title').value = data.faqSectionTitle || 'Frequently Asked Questions';
            document.getElementById('contact-title').value = data.contactSectionTitle || 'Contact Me';
            document.getElementById('info-title').value = data.infoSectionTitle || 'Contact Information';
            
            loadLinks(data.links || []);
            loadServices(data.services || []);
            loadProducts(data.products || []);
            loadGallery(data.galleryImages || []);
            loadBlogPosts(data.blogPosts || []);
            loadFaqs(data.faqs || []);
            loadContactInfo(data.contactInfo || []);
        }
    } catch (error) {
        console.error('Error loading profile data:', error);
    }
}

function checkAuthStatus() {
    const token = localStorage.getItem('authToken');
    if (!token) {
        window.location.href = '/custom-web/login';
    }
    return token;
}

document.addEventListener('DOMContentLoaded', () => {
    loadProfileData();
});

const style = document.createElement('style');
style.textContent = `
    .gallery-item {
        position: relative;
        overflow: hidden;
        border-radius: 0.5rem;
        background-color: #f3f4f6;
        aspect-ratio: 16/9;
    }
    
    .gallery-item img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
    
    .gallery-item-actions {
        position: absolute;
        top: 0.5rem;
        right: 0.5rem;
        display: flex;
        gap: 0.5rem;
        opacity: 0;
        transition: opacity 0.3s ease;
    }
    
    .gallery-item:hover .gallery-item-actions {
        opacity: 1;
    }
    
    .text-muted {
        color: #6b7280;
        font-size: 0.875rem;
    }
`;
document.head.appendChild(style);
</script>
</body>
</html>